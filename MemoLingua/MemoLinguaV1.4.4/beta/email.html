<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Memolingua â€” Join the Beta</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body id="page-email">
  <div class="app">
    <div class="header">
      <div>
        <img src="img/memo.png" alt="Memolingua" style="height:25px; width:auto;">
        <div class="subtitle">You've completed the trial! ğŸ‰</div>
      </div>
      <div class="badge">Beta</div>
    </div>

    <div style="text-align:center; margin-top:24px;">
      <div class="big-emoji">ğŸš€</div>
      <h2 style="margin:16px 0; font-size:20px; font-weight:700;">Ready to unlock all categories?</h2>
      <p style="color:var(--muted); margin:12px 0; line-height:1.6;">
        Enter your email address to access the full beta version and be part of the Memolingua journey.
      </p>
    </div>

    <!-- GOOGLE FORMS INTEGRATION -->
    <form 
      id="emailForm" 
      action="https://docs.google.com/forms/d/e/1FAIpQLSdCDtspkEIq4XdcDULVJSfIU69qGpk3NTgFjhGxjC4WlaWhqg/formResponse" 
      method="POST" 
      target="hidden_iframe"
      style="margin-top:24px;"
    >
      <div class="input-row">
        <input 
          id="emailInput" 
          type="email" 
          name="entry.765106133"
          autocomplete="email" 
          placeholder="your@email.com" 
          required 
          style="flex:1;"
        />
        <button class="btn" type="submit">Get Access</button>
      </div>
    </form>

    <!-- Hidden iframe to prevent redirect -->
    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

    <div id="emailFeedback" class="feedback small" style="text-align:center;"></div>

    <div class="info small" style="margin-top:24px; text-align:center;">
      We'll send you a link to access all 8 categories.<br>
      No spam, just vocabulary practice. ğŸ¯
    </div>
  </div>

  <script src="data.js"></script>
  <script src="app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('emailForm');
      const input = document.getElementById('emailInput');
      const feedback = document.getElementById('emailFeedback');

      form.onsubmit = (e) => {
        e.preventDefault();
        
        const email = input.value.trim();
        if(!email || !email.includes('@')){
          feedback.className = 'feedback wrong';
          feedback.innerText = 'âŒ Please enter a valid email address';
          return;
        }

        // Submit to Google Forms in background
        const formData = new FormData(form);
        fetch(form.action, {
          method: 'POST',
          body: formData,
          mode: 'no-cors' // Important for Google Forms
        });

        // Save email locally and grant full access
        saveEmail(email);

        // Show success message
        feedback.className = 'feedback correct';
        feedback.innerText = 'âœ… Success! Check your email for full access. You can now use all categories!';
        
        // Disable form after submission
        input.disabled = true;
        form.querySelector('button').disabled = true;
      };

      // Focus input on load
      if(input) input.focus();
    });
  </script>
</body>
</html>